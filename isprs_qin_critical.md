# A Critical Analysis of Satellite Stereo Pairs for Digital Surface Model Generation and A Matching Quality Prediction Model
Rongjun Qin  
ISPRS Journal of Photogrammetry and Remote Sensing
## Resources
[[PDF]](https://www.sciencedirect.com/science/article/pii/S0924271619301467) 
## Abstract
The geometric analysis and data acquisition of satellite photogrammetric images are often regarded as a direct extension of traditional aerial photogrammetry, with the only difference being the sensor model (linear array vs. central perspective). The intersection angle (or base-height ratio) between two images is seen as the most important metadata of stereo pairs, which directly relates to the base-high ratio and texture distortion in the parallax direction, thus both affecting the horizontal and vertical accuracy. State-of-the-art DIM algorithms were reported to work best for narrow baseline stereos (small intersection angle), e.g. Semi-Global Matching empirically takes 15–25° as “good” intersection angles. However, our experiments found that the intersection angle is not the only determining factor, as the same DIM algorithm applied to stereo pairs of the same area with similar and good intersection angle may produce point clouds with dramatically different accuracy (demonstrated in the graphical abstract). This raises a very practical and often asked question: what factors constitute a good satellite stereo pair for DIM algorithms? In this paper, we provide a comprehensive analysis on this matter by performing stereo matching using the very typical and widely-used Semi-Global Matching (SGM) with a Census cost over 1000 satellite stereo pairs of the same region with different meta-parameters including their intersection, off-nadir, sun elevation & azimuth angles, completeness and time differences, thus to offer a thorough answer to this question. Our conclusion has specifically outlined an important yet often ignored factor – the Sun-angle difference to be one decisive in determining good stereo pair. Based on the analytical results, we propose a simple idea by training a support vector machine model for predicting potential stereo matching quality (i.e. potential level of accuracy and completeness given a stereo pair). Experiments have shown that the model is well-suited and generalized for multi-stereo 3D reconstruction, evidenced by a comparative analysis against three other strategies: (1) pair selection based on an example patch where partial ground-truth data is available for computing a priori ranking (2) based on intersection angles and (3) based on a recent algorithm using intersection angle, off-nadir angle and time intervals. This work will potentially provide a valuable reference to researchers working on multi-view satellite image reconstruction, as well as for practitioners minimizing costs for high-quality large-scale mapping. The trained model is made available to the academic community upon request.  
<p align="center"><img src="https://user-images.githubusercontent.com/32317924/125139182-13886700-e0de-11eb-8e23-f7826752cb55.png"></p>
<p align="center"><img src="https://user-images.githubusercontent.com/32317924/125139472-95789000-e0de-11eb-81c3-afda70dba5e3.png"></p>
<p align="center"><img src="https://user-images.githubusercontent.com/32317924/125139251-3286f900-e0de-11eb-9a12-60bc3ed7a9bf.png"></p>

## Conclusion
This paper analyzes the relationship between critical meta-parameters (Table 1) of satellite stereo pairs and their resulting accuracy, and has proposed a method that uses SVM model for training a general stereo pair quality indicator. DSMs generated from approximately 1180 stereo pairs cross three typical urban regions have been evaluated against ground-truth, which serve as data points for analysis. An SVM-based quality indicator trained using data points from one of the regions are evaluated in other two regions and an additional region completely from different MVS (Multi-view stereo) dataset; With the application to MVS 3D reconstruction, we concluded that the proposed SVM-based quality indicator outperforms simple pair selection strategies: (1) example-based method that simply ranks image pairs based on evaluated accuracy against known ground-truth data of a sub-region; (2) intersection-angle based method that randomly select pairs with intersection angles within 15–25°; (3) the method of (Facciolo et al., 2017) that pre-select pairs with intersection and maximal off-nadir angles respectively within 5–45°, and below 40°, and then rank the selected pairs based on their acquisition time interval (shorter the higher rank). In addition, we show that the proposed SVM-based quality indicator is potentially scalable and can serve as a general satellite stereo-pair quality indicator by using it on other MVS datasets.

Through regression analysis we show that intersection angles, sun-angle differences and matching-completeness (a post-matching parameter) are important factors for stereo pair quality: In general larger-intersection angles yield higher per-point accuracy; while for dense reconstruction for urban area, a relatively smaller intersection angle generally yields better and more complete DSM, it is therefore scene dependent; Sun-angle difference plays an equivalent and sometimes a more important role in stereo reconstruction, as it may cast different directional illumination to anisotropic/specular ground surfaces which can be challenging for stereo algorithms; matching-completeness can be algorithm dependent but in general can serve as a good indicator for stereo quality if pre-matching is possible in certain scenarios (e.g. computational time is tolerable).

The contribution of this paper is mainly two-fold:  
1.We experimentally demonstrated the complex association between critical meta-parameters of satellite stereo pairs and their potentially achievable accuracy, and deliver important conclusions serving as key references for future researches on satellite stereo reconstruction.

2.We have proposed a general quality indicator based on a SVM model trained using our data and demonstrated the effectiveness of this model by applying to a MVS 3D reconstruction pipeline.


This proposed research has thoroughly investigated the stereo-pair dense matching quality using over 1000 stereo pairs (data points) under varying acquisition parameters. Through the analyses we answer the question of how to select good satellite stereo pairs for 3D reconstruction, and additionally provide a means of using our data for stereo pair quality indicator using an SVM model. To further validate our analysis and the proposed matching quality indicator, we expect our future works include higher volume of data that encapsulates more terrain types for analysis and testing and improving our proposed quality indicator.
## Reference
    @article{qin2019critical,
          title={A critical analysis of satellite stereo pairs for digital surface model generation and a matching quality prediction model},
          author={Qin, Rongjun},
          journal={ISPRS Journal of Photogrammetry and Remote Sensing},
          volume={154},
          pages={139--150},
          year={2019},
          publisher={Elsevier}
        }
